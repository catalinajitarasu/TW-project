<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="style-home-page.css">
    <title>Document</title>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            fetch("http://localhost:8000/products")
                .then(response => response.json())
                .then(data => {
                    // Parcurgem fiecare produs din răspunsul primit
                    data.forEach(product => {
                        // Crearea div-ului pentru produsul din menu-container
                        var menuDiv = document.createElement("div");
                        menuDiv.className = "menu";
                        menuDiv.setAttribute("data-name", product.id);

                        // Adăugarea imaginii
                        var img = document.createElement("img");
                        img.src = product.photo;
                        img.alt = product.name;
                        menuDiv.appendChild(img);

                        // Adăugarea numelui
                        var name = document.createElement("h3");
                        name.textContent = product.name;
                        menuDiv.appendChild(name);

                        // Adăugarea prețului
                        var price = document.createElement("div");
                        price.className = "price";
                        price.textContent = product.price + " lei";
                        menuDiv.appendChild(price);

                        // Adăugarea produsului în containerul menu-container
                        document.querySelector(".menu-container").appendChild(menuDiv);

                        // Cream elementele HTML corespunzătoare pentru fiecare produs și adăugam în containerul menu-preview

                        // Crearea div-ului pentru produsul din menu-preview
                        var previewDiv = document.createElement("div");
                        previewDiv.className = "preview";
                        previewDiv.setAttribute("data-target", product.id);

                        // Adăugarea butonului de închidere
                        var closeButton = document.createElement("button");
                        closeButton.className = "close-button";
                        closeButton.innerHTML = "&times;";
                        previewDiv.appendChild(closeButton);

                        // Adăugarea imaginii
                        var imgPreview = document.createElement("img");
                        imgPreview.src = product.photo;
                        imgPreview.alt = product.name;
                        previewDiv.appendChild(imgPreview);

                        // Adăugarea numelui
                        var namePreview = document.createElement("h3");
                        namePreview.textContent = product.name;
                        previewDiv.appendChild(namePreview);

                        // Adăugarea descrierii
                        var description = document.createElement("p");
                        description.textContent = product.description;
                        previewDiv.appendChild(description);

                        // Adăugarea prețului
                        var pricePreview = document.createElement("div");
                        pricePreview.className = "price";
                        pricePreview.textContent = product.price + " lei";
                        previewDiv.appendChild(pricePreview);

                        // Adăugarea link-ului de adăugare în coș
                        var buyLink = document.createElement("a");
                        buyLink.href = "#";
                        buyLink.className = "buy";
                        buyLink.textContent = "Add to cart";
                        previewDiv.appendChild(buyLink);

                        // Adăugarea produsului în containerul menu-preview
                        document.querySelector(".menu-preview").appendChild(previewDiv);
                    });
                })
                .catch(error => {
                    console.error("Error:", error);
                });
        });
    </script>
</head>
<body>
    <div class="main">
        <div class="logo">
            <img src="FOSO.png" alt="Foso">
        </div>
        <ul>
            <li> <a href="add-prod.html">Add product</a></li>
            <li> <a href="fav-list.html">Favorites</a></li>
            <li> <a href="shopping-list.html">Shopping Cart</a></li>
            <li> <a href="groups.html">Groups</a></li>
            <li> <a href="products.html">Products</a></li>
            <li> <a href="download.html">Statistics</a></li>
            <li> <a href="user/settings.html">Settings</a></li>
            <li> <a href="landing.html">Login-out</a></li>
            <li class="search-box" >
                <input class="search-txt" type="text" name="name" placeholder="Type a product">
                <a class="search-btn" href="products.html"><img src="search-btn.png" alt="btn"></a>
            </li>
        </ul>
    </div>
    
    <div class="container">
        <h3 class="headeing">Hello, @username!</h3> 
        <div class="menu-container">      <!--products-container--> 
        </div>
    </div>

    
<div class="menu-preview">   <!--products-preview-->
 
</div>
 

<script src="js-home-page.js"></script>
</body>
</html>